<html>
    <head>
        <title>Token Authentication</title>
    </head>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>    

    <script>
      async function signup(){
            const username= document.getElementById("username").value;
            const password= document.getElementById("password").value;

           await axios.post("http://localhost:3000/signup",{
            username:username,
            password:password
        });

        
        alert("user signed up successfully");
        }

        async function signin(){
        const username= document.getElementById("username1").value;
        const password= document.getElementById("password1").value;

        const response=  await axios.post("http://localhost:3000/signin",{
            username:username,
            password:password
        });

        localStorage.setItem("token",response.data.token);
        alert("user signed in successfully");
        }

        async function getUserInfo(){
            const response= await axios.get("http://localhost:3000/me",{
                headers:{
                    token: localStorage.getItem("token")
                }
            });
            document.getElementById("information").innerHTML="Username: "+response.data.username + "password: "+response.data.password;

        }
          
        function logout(){
            localStorage.removeItem("token");
            document.getElementById("information").innerHTML = "";
        }
           
        
        getUserInfo();
      
    </script>

    <body>
        <h1>Token Authentication</h1>

        <div>
            <h2>Sign Up</h2>
            <input type="text" name="username" placeholder="enter username" id="username"/>
            <input type="password" name="password" placeholder="enter password" id="password"/>
            <button onclick="signup()">Sign Up</button>
        </div>

        <div>
            <h2>Sign In</h2>
            <input type="text" name="username" placeholder="enter username" id="username1"/>
            <input type="password" name="password" placeholder="enter password" id="password1"/>
            <button onclick="signin()">Sign In</button>
        </div>

        <div>
            <h3>User Information:</h3>
            <div id="information"></div>
            <button onclick="getUserInfo()">Get My Info</button>
        </div>

        <div>
            <button onclick="logout()">Log Out</button>
        </div>

    </body>
</html>
